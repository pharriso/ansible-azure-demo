---

- name: remove default web site
  win_iis_website:
    name: "Default Web Site"
    state: absent

- name: create directory for dotnet website
  win_file:
    path: C:\webapp
    state: directory

- name: copy app across
  win_copy:
    src: webapp.zip
    dest: C:\Temp\webapp.zip

- name: unzip file
  win_unzip:
    src: C:\Temp\webapp.zip
    dest: C:\webapp

- name: install iis
  win_feature:
    name: Web-Server
    state: present
    include_sub_features: yes
    include_management_tools: yes

- name: download dotnet core runtime
  win_get_url: 
    url: https://dotnet.microsoft.com/download/thank-you/dotnet-runtime-2.2.6-windows-hosting-bundle-installer
    dest: C:\Temp

- name: install dotnet core runtime
  win_feature:
    name: NET-Framework-Core
    source: C:\Temp\dotnet-runtime-2.2.6-windows-hosting-bundle-installer
    state: present


